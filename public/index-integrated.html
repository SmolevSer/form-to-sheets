<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</title>
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  <div class="container">
    <!-- –§–æ—Ä–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
    <div id="auth-form">
      <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —É—á–µ—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
      <div class="form-group">
        <label for="login">–õ–æ–≥–∏–Ω:</label>
        <input type="text" id="login" required>
      </div>
      <div class="form-group">
        <label for="password">–ü–∞—Ä–æ–ª—å:</label>
        <input type="password" id="password" required>
      </div>
      <button class="btn submit" onclick="authenticate()">–í–æ–π—Ç–∏</button>
      <div id="auth-error" class="error"></div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ -->
    <div id="main-form" class="hidden">
      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
      <div id="session-timer" class="session-timer">
        –í—Ä–µ–º—è –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏: <span id="timer-display">--:--</span>
      </div>

      <div class="current-user">
        <span>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: <strong id="current-user-name"></strong></span>
        <button class="btn logout-btn" onclick="logout()">–í—ã–π—Ç–∏</button>
      </div>

      <h2>–£—á–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
      
      <!-- –í—ã–±–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ -->
      <div class="section">
        <div class="section-title">1. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é:</div>
        <div class="button-group">
          <button id="btn-company-mozaika" class="btn" onclick="selectCompany('–ú–æ–∑–∞–∏–∫–∞')">–ú–æ–∑–∞–∏–∫–∞</button>
          <button id="btn-company-kampus" class="btn" onclick="selectCompany('–ö–∞–º–ø—É—Å')">–ö–∞–º–ø—É—Å</button>
          <button id="btn-company-haigora" class="btn" onclick="selectCompany('–•–∞–π-–ì–æ—Ä–∞')">–•–∞–π-–ì–æ—Ä–∞</button>
        </div>
      </div>

      <!-- –í—ã–±–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
      <div id="operation-section" class="section hidden">
        <div class="section-title">2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏:</div>
        <div class="button-group">
          <button class="btn" onclick="selectOperation('–ü—Ä–∏—Ö–æ–¥')">–ü—Ä–∏—Ö–æ–¥</button>
          <button class="btn" onclick="selectOperation('–†–∞—Å—Ö–æ–¥')">–†–∞—Å—Ö–æ–¥</button>
          <button class="btn" onclick="selectOperation('–ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏')">–ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏</button>
          <button class="btn" onclick="selectOperation('–ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –°–í–û–ò–ú–ò –∫–æ–º–ø–∞–Ω–∏—è–º–∏')">–ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –°–í–û–ò–ú–ò –∫–æ–º–ø–∞–Ω–∏—è–º–∏</button>
        </div>
      </div>

      <!-- –í—ã–±–æ—Ä —Å—á–µ—Ç–∞ -->
      <div id="account-section" class="section hidden">
        <div class="section-title">3. –í—ã–±–µ—Ä–∏—Ç–µ —Å—á–µ—Ç —Å–ø–∏—Å–∞–Ω–∏—è:</div>
        <div class="button-group">
          <button class="btn" onclick="selectAccount('–ö–∞—Å—Å–∞')">–ö–∞—Å—Å–∞</button>
          <button class="btn" onclick="selectAccount('–ò–ü-3564')">–ò–ü-3564</button>
          <button class="btn" onclick="selectAccount('–ò–ü-7435')">–ò–ü-7435</button>
          <button class="btn" onclick="selectAccount('–ò–ü-–ê–∫–±–∞—Ä—Å')">–ò–ü-–ê–∫–±–∞—Ä—Å</button>
          <button class="btn" onclick="selectAccount('–ê–ù–û-–°–±–µ—Ä')">–ê–ù–û-–°–±–µ—Ä</button>
        </div>
      </div>

      <!-- –ë–ª–æ–∫ "–ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏" -->
      <div id="transfer-internal-block" class="section hidden">
        <div class="section-title">–ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏</div>
        
        <div class="form-group">
          <label for="amount-internal">–°—É–º–º–∞:</label>
          <input type="number" id="amount-internal" class="amount-input" step="0.01" placeholder="0,00">
        </div>

        <div class="form-group">
          <label for="payment-date-internal">–î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã:</label>
          <input type="date" id="payment-date-internal" class="date-input">
        </div>

        <div class="form-group">
          <label for="target-account-internal">–°—á–µ—Ç –¥–ª—è –∑–∞—á–∏—Å–ª–µ–Ω–∏—è:</label>
          <select id="target-account-internal">
            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å—á–µ—Ç --</option>
          </select>
        </div>

        <div class="form-group">
          <label for="comment-internal">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</label>
          <textarea id="comment-internal" rows="3"></textarea>
        </div>

        <div class="info-text">
          –í –¥–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏ –æ–¥–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–∏.
        </div>
      </div>

      <!-- –ë–ª–æ–∫ "–ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –°–í–û–ò–ú–ò –∫–æ–º–ø–∞–Ω–∏—è–º–∏" -->
      <div id="transfer-company-block" class="section hidden">
        <div class="section-title">–ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –°–í–û–ò–ú–ò –∫–æ–º–ø–∞–Ω–∏—è–º–∏</div>
        
        <div class="form-group">
          <label for="amount-company">–°—É–º–º–∞:</label>
          <input type="number" id="amount-company" class="amount-input" step="0.01" placeholder="0,00">
        </div>

        <div class="form-group">
          <label for="payment-date-company">–î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã:</label>
          <input type="date" id="payment-date-company" class="date-input">
        </div>

        <div class="form-group">
          <label for="target-company">–ö–æ–º–ø–∞–Ω–∏—è –ø–æ–ª—É—á–∞—Ç–µ–ª—å:</label>
          <select id="target-company">
            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é --</option>
          </select>
        </div>

        <div class="form-group">
          <label for="target-account-company">–°—á–µ—Ç –¥–ª—è –∑–∞—á–∏—Å–ª–µ–Ω–∏—è:</label>
          <select id="target-account-company">
            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å—á–µ—Ç --</option>
            <option value="–ö–∞—Å—Å–∞">–ö–∞—Å—Å–∞</option>
            <option value="–ò–ü-3564">–ò–ü-3564</option>
            <option value="–ò–ü-7435">–ò–ü-7435</option>
            <option value="–ò–ü-–ê–∫–±–∞—Ä—Å">–ò–ü-–ê–∫–±–∞—Ä—Å</option>
            <option value="–ê–ù–û-–°–±–µ—Ä">–ê–ù–û-–°–±–µ—Ä</option>
          </select>
        </div>

        <div class="form-group">
          <label for="comment-company">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</label>
          <textarea id="comment-company" rows="3"></textarea>
        </div>

        <div class="info-text">
          –í –¥–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –†–ê–°–•–û–î–ù–ê–Ø –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ —Å—á–µ—Ç—É. –ü—Ä–∏—Ö–æ–¥ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –∫–æ–º–ø–∞–Ω–∏—é –±—É–¥–µ—Ç –æ—Ç—Ä–∞–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ–µ –≤–≤–æ–¥–∏—Ç—å (–¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å) –Ω–µ –Ω—É–∂–Ω–æ.
        </div>
      </div>

      <!-- –ë–ª–æ–∫ "–†–∞—Å—Ö–æ–¥" -->
      <div id="expense-block" class="section hidden">
        <div class="section-title">–†–∞—Å—Ö–æ–¥</div>
        
        <div class="form-group">
          <label for="amount-expense">–°—É–º–º–∞:</label>
          <input type="number" id="amount-expense" class="amount-input" step="0.01" placeholder="0,00">
        </div>

        <div class="form-group">
          <label for="payment-date-expense">–î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã:</label>
          <input type="date" id="payment-date-expense" class="date-input">
        </div>

        <div class="form-group">
          <label for="accrual-date-expense">–î–∞—Ç–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è:</label>
          <input type="date" id="accrual-date-expense" class="date-input">
        </div>

        <div class="form-group">
          <label for="article-expense">–°—Ç–∞—Ç—å—è:</label>
          <div class="search-container">
            <select id="article-expense" class="search-input">
              <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—å—é --</option>
            </select>
            <button class="btn add-btn" onclick="toggleSearch('article-expense')">üîç</button>
          </div>
          <div id="search-article-expense" class="hidden" style="position: relative; margin-top: 5px;">
            <input type="text" placeholder="–ü–æ–∏—Å–∫ —Å—Ç–∞—Ç—å–∏..." onkeyup="searchArticles('expense', this.value)" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <div id="search-results-article-expense" class="search-results"></div>
          </div>
        </div>

        <div class="form-group">
          <label for="contractor-expense">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç:</label>
          <div class="search-container">
            <select id="contractor-expense" class="search-input">
              <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ --</option>
            </select>
            <button class="btn add-btn" onclick="toggleSearch('contractor-expense')">üîç</button>
            <button class="btn add-btn" onclick="showAddContractor('expense')">+</button>
          </div>
          <div id="search-contractor-expense" class="hidden" style="position: relative; margin-top: 5px;">
            <input type="text" placeholder="–ü–æ–∏—Å–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞..." onkeyup="searchContractors(this.value, 'expense')" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <div id="search-results-contractor-expense" class="search-results"></div>
          </div>
          <div id="add-contractor-expense" class="inline-add hidden">
            <input type="text" id="new-contractor-expense" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞">
            <button class="btn add-btn" onclick="addNewContractor('expense')">–î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
        </div>

        <div class="form-group">
          <label for="comment-expense">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</label>
          <textarea id="comment-expense" rows="3"></textarea>
        </div>

        <div class="info-text">
          –í –¥–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º–µ –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–∞—Å—Ö–æ–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.
        </div>
      </div>

      <!-- –ë–ª–æ–∫ "–ü—Ä–∏—Ö–æ–¥" -->
      <div id="income-block" class="section hidden">
        <div class="section-title">–ü—Ä–∏—Ö–æ–¥</div>
        
        <div class="form-group">
          <label for="amount-income">–°—É–º–º–∞:</label>
          <input type="number" id="amount-income" class="amount-input" step="0.01" placeholder="0,00">
        </div>

        <div class="form-group">
          <label for="payment-date-income">–î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã:</label>
          <input type="date" id="payment-date-income" class="date-input">
        </div>

        <div class="form-group">
          <label for="accrual-date-income">–î–∞—Ç–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è:</label>
          <input type="date" id="accrual-date-income" class="date-input">
        </div>

        <div class="form-group">
          <label for="article-income">–°—Ç–∞—Ç—å—è:</label>
          <div class="search-container">
            <select id="article-income" class="search-input">
              <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—å—é --</option>
            </select>
            <button class="btn add-btn" onclick="toggleSearch('article-income')">üîç</button>
          </div>
          <div id="search-article-income" class="hidden" style="position: relative; margin-top: 5px;">
            <input type="text" placeholder="–ü–æ–∏—Å–∫ —Å—Ç–∞—Ç—å–∏..." onkeyup="searchArticles('income', this.value)" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <div id="search-results-article-income" class="search-results"></div>
          </div>
        </div>

        <div class="form-group">
          <label for="contractor-income">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç:</label>
          <div class="search-container">
            <select id="contractor-income" class="search-input">
              <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ --</option>
            </select>
            <button class="btn add-btn" onclick="toggleSearch('contractor-income')">üîç</button>
            <button class="btn add-btn" onclick="showAddContractor('income')">+</button>
          </div>
          <div id="search-contractor-income" class="hidden" style="position: relative; margin-top: 5px;">
            <input type="text" placeholder="–ü–æ–∏—Å–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞..." onkeyup="searchContractors(this.value, 'income')" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <div id="search-results-contractor-income" class="search-results"></div>
          </div>
          <div id="add-contractor-income" class="inline-add hidden">
            <input type="text" id="new-contractor-income" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞">
            <button class="btn add-btn" onclick="addNewContractor('income')">–î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
        </div>

        <div class="form-group">
          <label for="comment-income">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</label>
          <textarea id="comment-income" rows="3"></textarea>
        </div>

        <div class="info-text">
          –í –¥–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏—Ö–æ–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.
        </div>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
      <div id="submit-section" class="section hidden">
        <button class="btn submit" onclick="submitForm()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</button>
        <button class="btn" onclick="resetForm()" style="margin-left: 20px;">–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É</button>
      </div>

      <!-- –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π -->
      <div id="history-section" class="section hidden">
        <div class="section-title">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏</div>
        <div class="table-container">
          <table id="operations-history">
            <thead>
              <tr>
                <th>–ö–æ–º–ø–∞–Ω–∏—è</th>
                <th>–û–ø–µ—Ä–∞—Ü–∏—è</th>
                <th>–°—á–µ—Ç</th>
                <th>–°—É–º–º–∞</th>
                <th>–î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã</th>
                <th>–°—Ç–∞—Ç—å—è</th>
                <th>–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç</th>
                <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
              </tr>
            </thead>
            <tbody id="history-tbody">
            </tbody>
          </table>
          <div id="no-history" class="info-text">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø—É—Å—Ç–∞</div>
        </div>
      </div>

      <div id="form-message"></div>
    </div>
  </div>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JavaScript –º–æ–¥—É–ª–µ–π -->
  <script src="scripts/auth.js"></script>
  <script src="scripts/references.js"></script>
  <script src="scripts/form-handler.js"></script>
  <script src="scripts/sheets-handler.js"></script>
</body>
</html>
